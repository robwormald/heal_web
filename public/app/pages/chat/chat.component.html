<container-block header='pages.chat.title' [center]='true'>
  <div id='chat-room' *ngIf='tabs.length'>
    <tabs-partial [tabs]='tabs' [currentTab]='currentTab' (currentTabChange)='switchChatRooms($event)'></tabs-partial>

    <div class='row'>
      <div class='col-xs-12 chat-header'>
        <textarea-partial uniqId='chatroom-textarea' placeholder='placeholders.message' (onSubmit)='onSend($event)' [keyPress]='true'></textarea-partial>
      </div>
    </div>

    <div class='chat-message-container'>
      <div class='chat-messages' *ngFor='let message of (chatMessageList | async) trackBy: message?.id'>
        <div class='row'>
          <div class='col-xs-12 chat-message-header'>
            <span class='pull-left'>{{ message.user.username }}</span>
            <date-partial class='pull-right' [date]='message.created_at'></date-partial>
          </div>
        </div>

        <div class='row'>
          <div class='col-xs-12 chat-message-body'>
            <div [innerHTML]='parseBBcode(message)'></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</container-block>
